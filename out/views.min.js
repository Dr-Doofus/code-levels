function userOpen(){return viewU&&viewU.dispose(),viewU=vc.window.createWebviewPanel("clvProfileU","User Profile",{preserveFocus:preserveFocus=!0,viewColumn:vc.ViewColumn.Two},{}),cfg=conf.load(),userUpdate(),viewU}function userUpdate(){cfg=conf.load();let e='<!DOCTYPE html>\n    <html lang="en">\n      <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <title>User Profile</title>\n        <style>';e+=coreStyle(),e+=userStyle(),e+="</style>\n      </head>\n    <body>";let a=new Date(Date.now()),i=a.toLocaleTimeString();if(e+="<div gt>Last updated at "+i+"</div><br>",data.usr){let a="user";cfg.user.name&&(a=cfg.user.name);let i="<div mt>"+a+"</div>",d=0;cfg.other.bigNumberFormat&&(d=cfg.other.bigNumberFormat);let t=10;cfg.user.levelMod&&(t=cfg.user.levelMod);let l=5;if(cfg.user.levelModLanguage&&(l=cfg.user.levelModLanguage),cfg.user.tracking){let a=0,r=0,l="",o="",n="",c=1/0;if(cfg.caps.mainUser>0&&(c=cfg.caps.mainUser),data.usr.lvl&&(a=Math.min(data.usr.lvl,c)),data.usr.exp&&(r=data.usr.exp),a&&a<c){let e=levels.calculateReq(a-1,t);l=number.format(r-e,d),o=number.format(levels.calculateReq(a,t)-e,d)}if(a&&a>=c&&(l="-----",o="-----"),r&&(n=number.format(r,d)),cfg.views.medalRequirementForUser>0&&a){let i=cfg.views.medalRequirementForUser,r=Math.min(Math.floor(a/i),10);e+="<div mm t"+r+"></div>"}if(e+=i,a&&r)if(e+="<div ml>Level <span>"+a+"</span></div>",e+="<div mb><div me ",a>=c)e+="mx></div></div>";else{let i=Math.min(levels.calculatePct(a,t,r,1),100);e+='style="width:'+i+'%"></div></div>'}l&&o&&n&&(e+="<div mv><span>"+l+"</span> / "+o,e+="<div mc>"+n+" total</div></div>")}else e+=i,e+="<div wn>Main User tracking disabled.</div>";if(e+="<div sp></div><div cn>",cfg.user.trackLanguage){if(data.usr.langs){let a=1/0;cfg.caps.userLanguage>0&&(a=cfg.caps.userLanguage);const i=Object.entries(data.usr.langs);for(var r=0;r<i.length;r++){let t=i[r][0],o=i[r][1].lvl,n=i[r][1].exp;if(t&&o&&n){e+="<div lp>",o=Math.min(o,a);let i=1,r=0;if(cfg.views.medalRequirementForUserLanguage>0){i=2;let e=cfg.views.medalRequirementForUserLanguage;r=Math.min(Math.floor(o/e),10)}let c=Math.min(levels.calculatePct(o,l,n,1),100);switch(i){case 1:default:e+="<div l tx";break;case 2:e+="<div l t"+r}o>=a&&(e+=" lx"),e+=' style="--p: '+c+'%">';let v="",f="",s=nlang.prettify(t);if(o<a){let e=levels.calculateReq(o-1,l);v=number.format(n-e,d,!0),f=" / "+number.format(levels.calculateReq(o,l)-e,d,!0)}o>=a&&(v=" MAX ",f="");let g=number.format(n,d,!0);e+="<div lc><div lt>"+s+"</div><div lo><span>"+v+"</span>"+f+"</div>",e+="<div lv>Lv. <span>"+o+"</span</div></div></div>",e+="<div la><span>"+g+"</span> total</div>",e+="</div></div>"}}}}else e+="<div wn>User Language tracking disabled.</div>"}e+="</div>\n      </body>\n    </html>",viewU.webview.html=e}function workspaceOpen(){return viewW&&viewW.dispose(),viewW=vc.window.createWebviewPanel("clvProfileW","Workspace Profile",{preserveFocus:preserveFocus=!0,viewColumn:vc.ViewColumn.Two},{}),cfg=conf.load(),workspaceUpdate(),viewW}function workspaceUpdate(){cfg=conf.load();let e='<!DOCTYPE html>\n    <html lang="en">\n      <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <title>Workspace Profile</title>\n        <style>';e+=coreStyle(),e+=workspaceStyle(),e+="</style>\n      </head>\n    <body>";let a=new Date(Date.now()),i=a.toLocaleTimeString();if(e+="<div gt>Last updated at "+i+"</div><br>",data.wsp){let a="Workspace",i="<div mt>"+a+"</div>",d=0;cfg.other.bigNumberFormat&&(d=cfg.other.bigNumberFormat);let t=10;cfg.workspace.levelMod&&(t=cfg.workspace.levelMod);let l=5;if(cfg.workspace.levelModLanguage&&(l=cfg.workspace.levelModLanguage),cfg.workspace.tracking){let a=0,r=0,l="",o="",n="",c=1/0;if(cfg.caps.mainWorkspace>0&&(c=cfg.caps.mainWorkspace),data.wsp.lvl&&(a=Math.min(data.wsp.lvl,c)),data.wsp.exp&&(r=data.wsp.exp),a&&a<c){let e=levels.calculateReq(a-1,t);l=number.format(r-e,d),o=number.format(levels.calculateReq(a,t)-e,d)}if(a&&a>=c&&(l="-----",o="-----"),r&&(n=number.format(r,d)),cfg.views.medalRequirementForWorkspace>0&&a){let i=cfg.views.medalRequirementForWorkspace,r=Math.min(Math.floor(a/i),10);e+="<div mm t"+r+"></div>"}if(e+=i,a&&r)if(e+="<div ml>Level <span>"+a+"</span></div>",e+="<div mb><div me ",a>=c)e+="mx></div></div>";else{let i=Math.min(levels.calculatePct(a,t,r,1),100);e+='style="width:'+i+'%"></div></div>'}l&&o&&n&&(e+="<div mv><span>"+l+"</span> / "+o,e+="<div mc>"+n+" total</div></div>")}else e+=i,e+="<div wn>Main Workspace tracking disabled.</div>";if(e+="<div sp></div><div cn>",cfg.workspace.trackLanguage){if(data.wsp.langs){let a=1/0;cfg.caps.workspaceLanguage>0&&(a=cfg.caps.workspaceLanguage);const i=Object.entries(data.wsp.langs);for(var r=0;r<i.length;r++){let t=i[r][0],o=i[r][1].lvl,n=i[r][1].exp;if(t&&o&&n){e+="<div lp>",o=Math.min(o,a);let i=1,r=0;if(cfg.views.medalRequirementForWorkspaceLanguage>0){i=2;let e=cfg.views.medalRequirementForWorkspaceLanguage;r=Math.min(Math.floor(o/e),10)}let c=Math.min(levels.calculatePct(o,l,n,1),100);switch(i){case 1:default:e+="<div l tx";break;case 2:e+="<div l t"+r}o>=a&&(e+=" lx"),e+=' style="--p: '+c+'%">';let v="",f="",s=nlang.prettify(t);if(o<a){let e=levels.calculateReq(o-1,l);v=number.format(n-e,d,!0),f=" / "+number.format(levels.calculateReq(o,l)-e,d,!0)}o>=a&&(v=" MAX ",f="");let g=number.format(n,d,!0);e+="<div lc><div lt>"+s+"</div><div lo><span>"+v+"</span>"+f+"</div>",e+="<div lv>Lv. <span>"+o+"</span</div></div></div>",e+="<div la><span>"+g+"</span> total</div>",e+="</div></div>"}}}}else e+="<div wn>Workspace language tracking disabled.</div>"}e+="</div>\n      </body>\n    </html>",viewW.webview.html=e}function coreStyle(){var e;return e+=":root{--m-bar:gray;--l-bar:maroon}div[gt]{opacity:.66;font-size:.85rem;margin-top:8px;position:absolute}div[mm]{background-color:rgba(255,255,255,.5);width:24px;height:24px;border:2px solid rgba(255,255,255,.5);left:24px;transform:rotate(45deg);margin-top:24px;position:absolute}div[mt]{font-size:1.5rem;margin-top:21px;font-weight:700;overflow:hidden;text-overflow:ellipsis;max-width:calc(min(451px,100%));margin-left:48px}div[ml]{margin-top:4px}div[ml] span{font-size:1.25rem;font-weight:700}div[mb]{width:calc(min(500px,100%));height:20px;background-color:rgba(0,0,0,.33);border-bottom:2px solid}div[me]{width:0%;background-color:var(--m-bar);height:20px}div[me][mx]{width:100%!important;background-image:var(--m-bar-max);height:20px}div[mv]{width:calc(min(500px,100%));font-size:.9rem;text-align:right}div[mv] span{font-size:1.1rem;font-weight:700}div[mc]{opacity:.66;font-size:.75rem}div[sp]{width:calc(min(500px,100%));height:20px;border-bottom:1px solid;margin-bottom:24px;opacity:.33}div[mm]{text-align:center}div[mm][tx]{opacity:0}div[mm][t0]{background-image:linear-gradient(-15deg,#000 33%,#222 66%,#000);opacity:.33;border-color:#000}div[mm][t1]{background-image:linear-gradient(-15deg,#f92 33%,#fc4 66%,#f92 100%);border-color:#d71}div[mm][t2]{background-image:linear-gradient(-15deg,#99a 20%,#bbc 40%,#eef 66%,#bbc 100%);border-color:#668}div[mm][t3]{background-image:linear-gradient(-15deg,#a84 20%,#db6 40%,#fed 66%,#db6 100%);border-color:#972}div[mm][t4]{background-image:linear-gradient(-15deg,#99f 20%,#ddf 40%,#fff 66%,#ddf 100%);border-color:#66b}div[mm][t5]{background-image:linear-gradient(-15deg,#090 15%,#4c4 30%,#4e4 45%,#afa 65%,#4e4 100%);border-color:#070;box-shadow:0 0 2px #0a0}div[mm][t6]{background-image:linear-gradient(-15deg,#924 15%,#b24 30%,#d24 45%,#e8a 65%,#d24 100%);border-color:#802;box-shadow:0 0 3px #904}div[mm][t7]{background-image:linear-gradient(-15deg,#a3c 15%,#b4e 30%,#e6f 45%,#faf 65%,#e6f 100%);border-color:#72b;box-shadow:0 0 4px #d0d}div[mm][t8]{background-image:linear-gradient(-15deg,#49c 15%,#7ae 30%,#aef 45%,#fff 65%,#aef 100%);border-color:#27a;box-shadow:0 0 5px #7cf}div[mm][t9]{background-image:linear-gradient(-15deg,#ccf 15%,#eef 30%,#fff 45%,#fdc 60%,#cfd 70%,#dcf 80%,#fff 95%,#ccf 100%);border-color:#acc;box-shadow:0 0 6px #dff}div[mm][t10]{background-image:linear-gradient(-15deg,#cff 10%,#fff 40%,#faa 50%,#fda 60%,#cfa 70%,#aff 80%,#daf 90%,#cff 100%);border-color:#acc;box-shadow:0 0 5px #faa;animation:sr-fx-m linear 3s infinite}@keyframes sr-fx-m{0%{box-shadow:0 0 5px #faa}14%{box-shadow:0 0 5.25px #fda}28%{box-shadow:0 0 5.5px #ffa}43%{box-shadow:0 0 6px #cfa}57%{box-shadow:0 0 5.66px #afc}71%{box-shadow:0 0 5.33px #aff}85%{box-shadow:0 0 5px #daf}}div[lp]{margin-bottom:20px}div[l]{--p:0%;width:128px;height:128px;border-radius:100%;margin:4px;text-align:center;background-image:conic-gradient(var(--l-bar) var(--p),rgba(0,0,0,.33) 0);display:block}div[l][lx]{background-image:var(--l-bar-max)}div[lc]{width:112px;height:90px;position:relative;padding-top:22px;font-size:1.2em;left:8px;top:8px;background-color:var(--vscode-editor-background);border-radius:100%}div[lt]{overflow:hidden;font-size:95%;text-overflow:ellipsis;height:2.8em;width:98px;margin-left:6px;border-radius:8px;font-weight:700}div[lo]{font-size:50%}div[lo] span{font-weight:700;font-size:133%}div[lv]{font-size:80%}div[lv] span{font-size:120%;font-weight:700}div[la]{text-align:center;width:128px;font-size:.85rem;opacity:.66;margin-top:20px;margin-bottom:8px}div[la] span{font-weight:700;font-size:.9rem;margin-left:8px}div[l][tx]{background-color:var(--vscode-editor-background);margin:4px}div[l][t0] div[lc]{background-image:linear-gradient(20deg,#112 33%,#334 66%,#112);color:#ddf}div[l][t1] div[lc]{background-image:linear-gradient(20deg,#f92 33%,#fc4 66%,#f92 100%);color:#930}div[l][t2] div[lc]{background-image:linear-gradient(20deg,#99a 20%,#bbc 40%,#eef 66%,#bbc 100%);color:#556}div[l][t3] div[lc]{background-image:linear-gradient(20deg,#a84 20%,#db6 40%,#fed 66%,#db6 100%);color:#651}div[l][t4] div[lc]{background-image:linear-gradient(20deg,#99f 20%,#ddf 40%,#fff 66%,#ddf 100%);color:#55b}div[l][t5]{box-shadow:0 0 4px #0a0}div[l][t5] div[lc]{background-image:linear-gradient(20deg,#090 15%,#4c4 30%,#4e4 45%,#afa 65%,#4e4 100%);color:#060}div[l][t6]{box-shadow:0 0 8px #904}div[l][t6] div[lc]{background-image:linear-gradient(20deg,#924 15%,#b24 30%,#d24 45%,#e8a 65%,#d24 100%);color:#601}div[l][t7]{box-shadow:0 0 9px #d0d}div[l][t7] div[lc]{background-image:linear-gradient(20deg,#a3c 15%,#b4e 30%,#e6f 45%,#faf 65%,#e6f 100%);color:#606}div[l][t8]{box-shadow:0 0 10px #7cf}div[l][t8] div[lc]{background-image:linear-gradient(20deg,#49c 15%,#7ae 30%,#aef 45%,#fff 65%,#aef 100%);color:#068}div[l][t9]{box-shadow:0 0 11px #dff}div[l][t9] div[lc]{background-image:linear-gradient(20deg,#ccf 15%,#eef 30%,#fff 45%,#fdc 60%,#cfd 70%,#dcf 80%,#fff 95%,#ccf 100%);color:#488}div[l][t10]{box-shadow:0 0 9px #faa;animation:sr-fx-l linear 3s infinite}div[l][t10] div[lc]{background-image:linear-gradient(20deg,#cff 5%,#fff 50%,#faa 55%,#fda 60%,#cfa 65%,#aff 70%,#daf 75%,#fff 80%,#cff 100%);color:#577}@keyframes sr-fx-l{0%{box-shadow:0 0 9px #faa}14%{box-shadow:0 0 10px #fda}28%{box-shadow:0 0 11px #ffa}43%{box-shadow:0 0 12px #cfa}57%{box-shadow:0 0 12px #afc}71%{box-shadow:0 0 11px #aff}85%{box-shadow:0 0 10px #daf}}div[wn]{color:rgba(255,64,64,.5);font-size:.75rem;font-weight:700}div[cn]{display:flex;flex-wrap:wrap}",e}function userStyle(){let e;return e+=":root{--h:0}div{--m-bar:rgba(255,192,0,1);--m-bar-s:rgba(255,240,160,1)}div[me][mx]{--m-bar-max:linear-gradient(185deg,var(--m-bar) 20%,var(--m-bar-s) 40%,var(--m-bar) 60%)}div[l]{--l-bar:rgba(0,192,255,1);--l-bar-s:rgba(200,255,255,1)}div[l][lx]{--l-bar-max:linear-gradient(25deg,var(--l-bar) 40%,var(--l-bar-s) 60%,var(--l-bar) 80%)}",e}function workspaceStyle(){let e;return e+=":root{--h:0}div[me]{--m-bar:rgba(0,255,192,1);--m-bar-s:rgba(192,240,255,1)}div[me][mx]{--m-bar-max:linear-gradient(185deg,var(--m-bar) 20%,var(--m-bar-s) 40%,var(--m-bar) 60%)}div[l]{--l-bar:rgba(192,64,255,1);--l-bar-s:rgba(255,200,255,1)}div[l][lx]{--l-bar-max:linear-gradient(25deg,var(--l-bar) 40%,var(--l-bar-s) 60%,var(--l-bar) 80%)}",e}const vc=require("vscode"),data=require("./data.min.js"),levels=require("./levels.min.js"),number=require("./number.min.js"),nlang=require("./nicelang.min.js"),conf=require("./config.min.js");var viewU,viewW,cfg={};module.exports={userOpen:userOpen,userUpdate:userUpdate,workspaceOpen:workspaceOpen,workspaceUpdate:workspaceUpdate,viewU:viewU,viewW:viewW};